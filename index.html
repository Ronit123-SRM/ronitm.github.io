<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sweet Boy & Pretty Girl</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<style>
html,body{
  margin:0;padding:0;width:100%;height:100%;
  overflow:hidden;font-family:Arial,sans-serif;
  background:black;
}

/* ========= CLICK TO START ========= */
#startOverlay{
  position:fixed;inset:0;
  background:black;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
#startText{
  color:white;
  font-size:1.8rem;
  animation:pulse 2s infinite;
}
@keyframes pulse{
  0%,100%{opacity:.4}
  50%{opacity:1}
}

/* ========= STORY ========= */
body{
  background:url("wintervillage.jpg") center/cover no-repeat fixed;
}
#scene{position:absolute;width:100vw;height:100vh;}

.text-box{
  position:absolute;
  width:85%;left:7.5%;
  padding:14px;
  background:rgba(255,255,255,.9);
  border-radius:10px;
  font-size:1.4rem;
  opacity:0;
  text-align:center;
}

#sweetBoy,#prettyGirl{
  position:absolute;width:150px;opacity:0;
}

.photo{
  position:absolute;
  max-width:260px;
  left:50%;transform:translateX(-50%);
  top:25%;opacity:0;
}

#endingGif{
  position:absolute;
  max-width:260px;
  left:50%;transform:translateX(-50%);
  top:38%;opacity:0;
}

#finalMessage{
  position:absolute;width:100%;
  top:75%;text-align:center;
  font-size:2.2rem;color:#ff2a68;
  opacity:0;
  text-shadow:2px 2px 8px rgba(0,0,0,.8);
}

/* ========= CORNER NEXT PROMPT ========= */
#nextCorner{
  position:fixed;
  bottom:18px;
  right:22px;
  font-size:1.1rem;
  color:white;
  opacity:0;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:8px;
  z-index:50;
  animation:fadePulse 2s infinite;
  display:none; /* Hidden initially */
}
#nextArrow{font-size:1.5rem}

@keyframes fadePulse{
  0%,100%{opacity:.35}
  50%{opacity:1}
}

/* ========= LOVE TREE ========= */
#loveTreePage{
  position:fixed;inset:0;
  background:radial-gradient(circle at top,#0b2d1c,#000);
  display:none;
  color:white;
}

#treeHint{
  position:absolute;
  top:24px;
  right:26px;
  font-size:1.1rem;
  opacity:.85;
  max-width:260px;
  line-height:1.4;
  text-align:right;
}

.treeWrap{
  display:flex;
  justify-content:center;
  align-items:center;
  height:100%;
}

.tree{
  position:relative;
  width:300px;
  height:440px;
}

#treeHeart{
  position:absolute;
  top:-26px;
  left:50%;
  transform:translateX(-50%);
  font-size:2.2rem;
  animation:heartGlow 2.5s infinite;
}
@keyframes heartGlow{
  0%,100%{filter:drop-shadow(0 0 6px #ff6fa8)}
  50%{filter:drop-shadow(0 0 18px #ffb3d1)}
}

.tree-layer{
  position:absolute;left:50%;
  transform:translateX(-50%);
  border-left:150px solid transparent;
  border-right:150px solid transparent;
}
.layer1{top:20px;border-bottom:120px solid #1f7a3d}
.layer2{top:90px;border-bottom:140px solid #1b6b35}
.layer3{top:170px;border-bottom:160px solid #165c2e}

.trunk{
  position:absolute;bottom:0;left:50%;
  transform:translateX(-50%);
  width:50px;height:70px;background:#6b3e26;
}

.ornament{
  position:absolute;width:42px;height:42px;
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-size:1.3rem;
}
.ornament.opened{box-shadow:0 0 25px white}
.ornament.locked{opacity:.4;cursor:not-allowed}
.ornament.locked::after{content:"‚è≥";position:absolute}

.o1{top:110px;left:130px;background:crimson}
.o2{top:150px;left:80px;background:gold}
.o3{top:150px;left:180px;background:hotpink}
.o4{top:220px;left:60px;background:lightskyblue}
.o5{top:220px;left:200px;background:violet}
.o6{top:290px;left:110px;background:orange}
.o7{top:290px;left:160px;background:limegreen}

/* ========= MODAL ========= */
#modal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index: 1000;
}
#modalBox{
  background:#111;
  padding:30px;
  border-radius:15px;
  max-width:420px;
  text-align:center;
  font-size:1.2rem;
  color:white;
}

/* ========= FINAL LETTER ========= */
#finalSurprise{
  position:fixed;inset:0;
  background:rgba(0,0,0,.95);
  display:none;
  align-items:center;
  justify-content:center;
  z-index: 2000;
}
#finalCard{
  background:rgba(20,20,20,.85);
  padding:40px;
  border-radius:20px;
  max-width:600px;
  border: 1px solid #ff2a68;
}
#typedText{
  white-space:pre-line;
  font-size:1.2rem;
  line-height:1.6;
  color: white;
}
</style>
</head>

<body>

<div id="startOverlay"><div id="startText">‚ùÑÔ∏è Click to start your story ‚ùÑÔ∏è</div></div>

<audio id="storyMusic" src="music.mp3" loop></audio>
<audio id="treeMusic" src="love-tree-music.mp3" loop></audio>

<div id="scene">
  <div id="sweetBoy" style="top:65%;left:-20%">
    <svg width="150" height="250">
      <circle cx="75" cy="40" r="30" stroke="white" stroke-width="5" fill="none"/>
      <line x1="75" y1="70" x2="75" y2="140" stroke="white" stroke-width="5"/>
      <line x1="75" y1="95" x2="30" y2="120" stroke="white" stroke-width="5"/>
      <line x1="75" y1="95" x2="120" y2="120" stroke="white" stroke-width="5"/>
      <line x1="75" y1="140" x2="45" y2="210" stroke="white" stroke-width="5"/>
      <line x1="75" y1="140" x2="105" y2="210" stroke="white" stroke-width="5"/>
    </svg>
  </div>

  <div id="prettyGirl" style="top:65%;left:85%">
    <svg width="150" height="250">
      <circle cx="75" cy="40" r="30" stroke="white" stroke-width="5" fill="none"/>
      <line x1="75" y1="70" x2="75" y2="140" stroke="white" stroke-width="5"/>
      <line x1="75" y1="95" x2="40" y2="120" stroke="white" stroke-width="5"/>
      <line x1="75" y1="95" x2="110" y2="120" stroke="white" stroke-width="5"/>
      <line x1="75" y1="140" x2="50" y2="210" stroke="white" stroke-width="5"/>
      <line x1="75" y1="140" x2="100" y2="210" stroke="white" stroke-width="5"/>
    </svg>
  </div>

  <div id="txt1" class="text-box">It was Christmas Eve‚Ä¶ and Sweet Boy set out on his snowy journey‚Ä¶</div>
  <div id="txt2" class="text-box">With every step, his thoughts kept drifting back to her.</div>
  <div id="txt3" class="text-box">Even in the cold, the memories felt warm.</div>
  <div id="txt4" class="text-box">Through quiet streets and glowing lights, he kept walking.</div>
  <div id="txt5" class="text-box">And finally‚Ä¶ there she was.</div>

  <img id="photo1" class="photo" src="Leah1.jpeg">
  <img id="photo2" class="photo" src="Leah2.jpeg">
  <img id="endingGif" class="photo" src="Leah.gif">
  <div id="finalMessage">Merry Christmas my pretty girl ‚ù§Ô∏è</div>
</div>

<div id="nextCorner"><span id="nextArrow">‚ûú</span><span>Click next to continue</span></div>

<div id="loveTreePage">
  <div id="treeHint">
    Follow what feels right.<br>
    Not everything opens at once.
    Take your time.<br>
    Some moments wait for the right one.
  </div>

  <div class="treeWrap">
    <div class="tree">
      <div id="treeHeart">‚ù§Ô∏è</div>
      <div class="tree-layer layer1"></div>
      <div class="tree-layer layer2"></div>
      <div class="tree-layer layer3"></div>
      <div class="trunk"></div>

      <div class="ornament o1" data-id="1">‚ù§Ô∏è</div>
      <div class="ornament o2" data-id="2">‚ú®</div>
      <div class="ornament o3" data-id="3">üéÅ</div>
      <div class="ornament o4" data-id="4">üí´</div>
      <div class="ornament o5" data-id="5">üíñ</div>
      <div class="ornament o6" data-id="6">üåü</div>
      <div class="ornament o7 locked" data-id="7">üéÑ</div>
    </div>
  </div>
</div>

<div id="modal">
  <div id="modalBox">
    <p id="modalText"></p><br>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<div id="finalSurprise">
  <div id="finalCard">
    <p id="typedText"></p>
  </div>
</div>

<script>
const BEAT_DROP_TIME = 160; 
const NAME_START = 160; 
const NAME_SPEED = 100; // Faster typing for name
const LETTER_SPEED = 70; // Natural typing speed for letter

const nameLine = "Dear Leah Danielle Nehrbass";
const letterMessage = `For the past almost two months we‚Äôve been together, it has been amazing, and I really felt like I had to give you this gift ‚Äî because you gave me the gift of calling me yours.

I hope this is the first of many Christmases together. I hope you liked this gift ‚Äî I put just a little bit of time into it.

Merry Christmas, baby.

I‚Äôm really grateful it‚Äôs you.
Always. ‚ù§Ô∏è`;

const messages = {
  1: "You're the sweetest girl, and you always make me feel safe.",
  2: "Your vulnerability in being comfortable with me is so attractive.",
  3: "Your caring nature in always wanting to know what I‚Äôm up to\nmakes me so happy.",
  4: "Your flirting over text has my parents wondering\nwhy I‚Äôm always smiling.\nPlease don‚Äôt stop ‚Äî it‚Äôs amazing.",
  5: "Your clinginess is perfect.\nEven with me across the world,\nit feels like you‚Äôre always there with me.",
  6: "Your humor always makes me smile\n(cough cough‚Ä¶ clearly you learned from the best).",
  7: "I choose you ‚Äî always."
};

const tl = gsap.timeline({paused:true, onComplete: showNextCorner});

startOverlay.onclick = () => {
  startOverlay.style.display = "none";
  storyMusic.play();
  tl.play();
};

tl.to("#sweetBoy",{opacity:1,x:"30vw",duration:2})
  .to("#txt1",{opacity:1,duration:3})
  .to("#txt1",{opacity:0,duration:1},"+=2")
  .to("#txt2",{opacity:1,duration:3})
  .to("#txt2",{opacity:0,duration:1},"+=2")
  .to("#photo1",{opacity:1,duration:2})
  .to("#photo1",{opacity:0,duration:1},"+=3")
  .to("#txt3",{opacity:1,duration:3})
  .to("#txt3",{opacity:0,duration:1},"+=2")
  .to("#photo2",{opacity:1,duration:2})
  .to("#photo2",{opacity:0,duration:1},"+=3")
  .to("#txt4",{opacity:1,duration:3})
  .to("#txt4",{opacity:0,duration:1},"+=2")
  .to("#prettyGirl",{opacity:1,duration:2, left: "55%"})
  .to("#txt5",{opacity:1,duration:3})
  .to("#txt5",{opacity:0,duration:1},"+=2")
  .to("#endingGif",{opacity:1,duration:2})
  .to("#finalMessage",{opacity:1,scale:1.2,duration:2});

function showNextCorner(){
  nextCorner.style.display = "flex";
  gsap.to("#nextCorner", {opacity: 1, duration: 1});
}

nextCorner.onclick = () => {
  storyMusic.pause();
  nextCorner.style.display = "none";
  scene.style.display = "none";
  loveTreePage.style.display = "block";
  treeMusic.play();
};

let openedCount = 0;

document.querySelectorAll(".ornament").forEach(o => {
  o.onclick = () => {
    if(o.classList.contains("locked")){
      modalText.textContent = "Just a little longer‚Ä¶ ‚ú®";
      modal.style.display = "flex";
      return;
    }
    if(o.classList.contains("opened")) return;

    o.classList.add("opened");
    modalText.textContent = messages[o.dataset.id];
    modal.style.display = "flex";
    
    if(o.dataset.id !== "7") openedCount++;

    if(openedCount === 6){
      waitForBeat();
    }
    if(o.dataset.id === "7"){
      finalReveal();
    }
  };
});

function closeModal(){ modal.style.display = "none"; }

function waitForBeat(){
  const check = setInterval(() => {
    if(treeMusic.currentTime >= BEAT_DROP_TIME){
      clearInterval(check);
      document.querySelector(".ornament.o7").classList.remove("locked");
    }
  }, 100);
}

function finalReveal(){
  modal.style.display = "none";
  finalSurprise.style.display = "flex";
  typedText.textContent = "";

  let nameIndex = 0;
  let letterIndex = 0;

  function typeName(){
    if (nameIndex < nameLine.length) {
      typedText.textContent += nameLine[nameIndex++];
      setTimeout(typeName, NAME_SPEED);
    } else {
      typedText.textContent += "\n\n";
      setTimeout(typeLetter, 1000);
    }
  }

  function typeLetter(){
    if (letterIndex < letterMessage.length) {
      typedText.textContent += letterMessage[letterIndex++];
      setTimeout(typeLetter, LETTER_SPEED);
    }
  }

  typeName();
}
</script>

</body>
</html>
